{% extends "layout.html" %}

{% block title %}
    Books
{% endblock %}

{% block main %}
<main>
    <div id="main-content">
        <h1>All Books</h1>
        {% if error %}
        <div id="error-message">
            Please make sure to add a book title, author, and genre
        </div>
        {% endif %}
        <div id="form">
            <form action="/books/create" method="post">
            <label for="title">Title</label>
            <input type="text" name="title" id="title">
            <label for="author">Author</label>
            <input type="text" name="author" id="author">
            <label for="genre">Genre</label>
            <input type="text" name="genre" id="genre">
            <input type="submit" value="Add Book">
            </form>
        </div>
        <div class="book-cards">
            {% for book in books %} 
            <div class="book-card">
                <h2 class="card-header"><a href=/books/{{ book.hyphenate_title() }}>{{ book.title }}</a></h2>
                <form action="/books/{{ book.hyphenate_title() }}/update" method="post">
                    {% if book.is_checked_out %}
                    <span>Checked-in <input name="check-out-status" type="radio" value="checked-in" onchange="this.form.submit()"/></span>
                    <span>Checked-out <input name="check-out-status" type="radio" value="checked-out" onchange="this.form.submit()" checked/></span>
                    {% else %}
                    <span>Checked-in <input name="check-out-status" type="radio" value="checked-in" onchange="this.form.submit()" checked/></span>
                    <span>Checked-out <input name="check-out-status" type="radio" value="checked-out" onchange="this.form.submit()"/></span>
                    {% endif %}
                </form>
                <form action="/books/{{ book.hyphenate_title() }}/delete" method="post">
                <input type="submit" value="Remove Book">
                </form>
            </div>
            {% endfor %}
        </div>
    </div>
</main>
{% endblock %}